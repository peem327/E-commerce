{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\User\\\\Desktop\\\\program\\\\toturial\\\\Toturial By Olan\\\\React\\\\workshop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\User\\\\Desktop\\\\program\\\\toturial\\\\Toturial By Olan\\\\React\\\\workshop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\User\\\\Desktop\\\\program\\\\toturial\\\\Toturial By Olan\\\\React\\\\workshop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\User\\\\Desktop\\\\program\\\\toturial\\\\Toturial By Olan\\\\React\\\\workshop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\User\\\\Desktop\\\\program\\\\toturial\\\\Toturial By Olan\\\\React\\\\workshop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Calculator from\"./Calculator\";import ProductList from\"../Product/ProductList\";import axios from\"axios\";var Monitor=/*#__PURE__*/function(_Component){_inherits(Monitor,_Component);var _super=_createSuper(Monitor);function Monitor(props){var _this;_classCallCheck(this,Monitor);_this=_super.call(this,props);_this.state={totalPrice:0,orders:[],confirm:false,msg:''};_this.addOrder=_this.addOrder.bind(_assertThisInitialized(_this));_this.delOrder=_this.delOrder.bind(_assertThisInitialized(_this));_this.cancelOrder=_this.cancelOrder.bind(_assertThisInitialized(_this));_this.confirmOrder=_this.confirmOrder.bind(_assertThisInitialized(_this));return _this;}_createClass(Monitor,[{key:\"addOrder\",value:function addOrder(product){var findOrder=this.state.orders.find(function(order){return order.product.productId==product.productId;});if(findOrder){findOrder.quantity++;}else{this.state.orders.push({product:product,quantity:1});}var totalPrice=this.state.totalPrice+parseInt(product.unitPrice);this.setState({totalPrice:totalPrice,orders:this.state.orders,confirm:false});}},{key:\"delOrder\",value:function delOrder(product){var findOrder=this.state.orders.find(function(order){return order.product.productId==product.productId;});var resultOrder=this.state.orders.filter(function(order){return order.product.productId!=product.productId;});var totalPrice=this.state.totalPrice-findOrder.quantity*parseInt(findOrder.product.unitPrice);this.setState({totalPrice:totalPrice,orders:resultOrder,confirm:false});}},{key:\"cancelOrder\",value:function cancelOrder(){this.setState({totalPrice:0,orders:[],confirm:false});}},{key:\"confirmOrder\",value:function confirmOrder(){var _this2=this;var _this$state=this.state,totalPrice=_this$state.totalPrice,orders=_this$state.orders;if(orders&&orders.length>0){axios.post(\"http://localhost:3001/orders\",{orderedDate:new Date(),totalPrice:totalPrice,orders:orders}).then(function(res){_this2.setState({totalPrice:0,orders:[],confirm:true,msg:'บันทึกรายการสั่งซื้อเรียบร้อยแล้วคะ'});});}else{this.setState({totalPrice:0,orders:[],confirm:true,msg:'เลือกสินค้าก่อนคะ'});}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},this.state.confirm&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-secondary text-right title\",role:\"alert\"},this.state.msg),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-9\"},/*#__PURE__*/React.createElement(ProductList,{products:this.props.products,onAddOrder:this.addOrder})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(Calculator,{totalPrice:this.state.totalPrice,orders:this.state.orders,onDelOrder:this.delOrder,onCancelOrder:this.cancelOrder,onConfirmOrder:this.confirmOrder}))));}}]);return Monitor;}(Component);export default Monitor;","map":{"version":3,"sources":["C:/Users/User/Desktop/program/toturial/Toturial By Olan/React/workshop/client/src/components/monitor/Monitor.js"],"names":["React","Component","Calculator","ProductList","axios","Monitor","props","state","totalPrice","orders","confirm","msg","addOrder","bind","delOrder","cancelOrder","confirmOrder","product","findOrder","find","order","productId","quantity","push","parseInt","unitPrice","setState","resultOrder","filter","length","post","orderedDate","Date","then","res","products"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Calculator from \"./Calculator\";\r\nimport ProductList from \"../Product/ProductList\";\r\nimport axios from \"axios\";\r\n\r\nclass Monitor extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { totalPrice: 0, orders: [], confirm: false, msg: '' };\r\n        this.addOrder = this.addOrder.bind(this);\r\n        this.delOrder = this.delOrder.bind(this);\r\n        this.cancelOrder = this.cancelOrder.bind(this);\r\n        this.confirmOrder = this.confirmOrder.bind(this);\r\n    }\r\n\r\n\r\n    addOrder(product) {\r\n        let findOrder = this.state.orders.find(order => order.product.productId == product.productId);\r\n        if (findOrder) {\r\n            findOrder.quantity++;\r\n        }\r\n        else {\r\n            this.state.orders.push({ product: product, quantity: 1 });\r\n        }\r\n        const totalPrice = this.state.totalPrice + parseInt(product.unitPrice);\r\n        this.setState({ totalPrice: totalPrice, orders: this.state.orders, confirm: false });\r\n    }\r\n\r\n    delOrder(product) {\r\n        let findOrder = this.state.orders.find(order => order.product.productId == product.productId);\r\n        let resultOrder = this.state.orders.filter(order => order.product.productId != product.productId)\r\n        const totalPrice = this.state.totalPrice - (findOrder.quantity * parseInt(findOrder.product.unitPrice));\r\n        this.setState({ totalPrice: totalPrice, orders: resultOrder, confirm: false });\r\n    }\r\n\r\n    cancelOrder() {\r\n        this.setState({ totalPrice: 0, orders: [], confirm: false });\r\n    }\r\n\r\n    confirmOrder() {\r\n        const { totalPrice, orders } = this.state;\r\n        if (orders && orders.length > 0) {\r\n            axios.post(\"http://localhost:3001/orders\", { orderedDate: new Date(), totalPrice, orders })\r\n                .then(res => { this.setState({ totalPrice: 0, orders: [], confirm: true, msg: 'บันทึกรายการสั่งซื้อเรียบร้อยแล้วคะ' }); })\r\n        }else {\r\n            this.setState({ totalPrice: 0, orders: [], confirm: true, msg: 'เลือกสินค้าก่อนคะ' });\r\n        }\r\n    } \r\n    \r\n\r\nrender() {\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            {this.state.confirm && <div className=\"alert alert-secondary text-right title\" role=\"alert\">\r\n                {this.state.msg}\r\n            </div>\r\n            }\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col-md-9\">\r\n                    <ProductList products={this.props.products} onAddOrder={this.addOrder} />\r\n                </div>\r\n                <div className=\"col-md-3\">\r\n                    <Calculator totalPrice={this.state.totalPrice} orders={this.state.orders} onDelOrder={this.delOrder} onCancelOrder={this.cancelOrder} onConfirmOrder={this.confirmOrder} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\n}\r\n\r\nexport default Monitor;"]},"metadata":{},"sourceType":"module"}